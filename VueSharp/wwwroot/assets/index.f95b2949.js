import{r as D,c as v,a as g,o as l,b as d,d as c,e as _,F as q,f as H,g as V,h as B,i as U,S as k,j,t as K,k as M,w as b,p as E,l as x,m as T,n as W}from"./vendor.aef81359.js";const Y=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}};Y();const h=D({user:{},account:{}});var w=(t,e)=>{for(const[o,n]of e)t[o]=n;return t};const z={name:"App",setup(){return{appState:v(()=>h)}}},F=c("footer",null,[c("div",{class:"bg-dark text-light text-center p-4"}," Made with \u{1F496} by CodeWorks ")],-1);function G(t,e,o,n,r,s){const a=g("Navbar"),u=g("router-view");return l(),d(q,null,[c("header",null,[_(a)]),c("main",null,[_(u)]),F],64)}var Q=w(z,[["render",G]]);const S=window.location.origin.includes("localhost"),C=S?"http://localhost:3000":"",J="",X="",Z="",ee="modulepreload",$={},te="/",y=function(e,o){return!o||o.length===0?e():Promise.all(o.map(n=>{if(n=`${te}${n}`,n in $)return;$[n]=!0;const r=n.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":ee,r||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),r)return new Promise((u,R)=>{a.addEventListener("load",u),a.addEventListener("error",R)})})).then(()=>e())};function oe(t){switch(t){case"./pages/AboutPage.vue":return y(()=>import("./AboutPage.0cb51658.js"),["assets/AboutPage.0cb51658.js","assets/vendor.aef81359.js"]);case"./pages/AccountPage.vue":return y(()=>import("./AccountPage.d532ba85.js"),["assets/AccountPage.d532ba85.js","assets/AccountPage.1d38451d.css","assets/vendor.aef81359.js"]);case"./pages/HomePage.vue":return y(()=>import("./HomePage.917b6ad9.js"),["assets/HomePage.917b6ad9.js","assets/HomePage.28f89256.css","assets/vendor.aef81359.js"]);default:return new Promise(function(e,o){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function A(t){return()=>oe(`./pages/${t}.vue`)}const ne=[{path:"/",name:"Home",component:A("HomePage")},{path:"/about",name:"About",component:A("AboutPage")},{path:"/account",name:"Account",component:A("AccountPage"),beforeEnter:B}],P=H({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:V(),routes:ne});function m(t,e){if(S)console[t](`[${t}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(t){case"log":case"assert":return}console[t](`[${t}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const p={log(){m("log",arguments)},error(){m("error",arguments)},warn(){m("warn",arguments)},assert(){m("assert",arguments)},trace(){m("trace",arguments)}},f=U.create({baseURL:C,timeout:8e3});class re{async getAccount(){try{const e=await f.get("/account");h.account=e.data}catch(e){p.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const se=new re;class ae{static async confirm(e="Are you sure?",o="You won't be able to revert this!",n="warning",r="Yes, delete it!"){try{return!!(await k.fire({title:e,text:o,icon:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",o="warning",n="top-end",r=3e3,s=!0){k.fire({title:e,icon:o,position:n,timer:r,timerProgressBar:s,toast:!0,showConfirmButton:!1})}}const ce={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class ie{constructor(e=!1,o=C){}on(e,o){var n;return(n=this.socket)==null||n.on(e,o.bind(this)),this}onConnected(e){p.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){p.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var o;(o=this.socket)==null||o.emit(ce.authenticate,e)}onError(e){p.error("[SOCKET_ERROR]",e)}enqueue(e,o){p.log("[ENQUEING_ACTION]",{action:e,payload:o}),this.queue.push({action:e,payload:o})}playback(){p.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(o=>{this.emit(o.action,o.payload)})}emit(e,o=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,o);if(!this.connected)return this.enqueue(e,o);this.socket.emit(e,o)}}class ue extends ie{constructor(){super();this.on("error",this.onError)}onError(e){ae.toast(e.message,"error")}}const O=new ue,i=j({domain:J,clientId:X,audience:Z,useRefreshTokens:!0,onRedirectCallback:t=>{P.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});i.on(i.AUTH_EVENTS.AUTHENTICATED,async function(){f.defaults.headers.authorization=i.bearer,f.interceptors.request.use(le),h.user=i.user,await se.getAccount(),O.authenticate(i.bearer)});async function le(t){if(!i.isAuthenticated)return t;const e=i.identity.exp*1e3,o=e<Date.now(),n=e<Date.now()+1e3*60*60*12;return o?await i.loginWithPopup():n&&(await i.getTokenSilently(),f.defaults.headers.authorization=i.bearer,O.authenticate(i.bearer)),t}const de={setup(){return{user:v(()=>h.user),account:v(()=>h.account),async login(){i.loginWithPopup()},async logout(){i.logout({returnTo:window.location.origin})}}}},N=t=>(E("data-v-f7b5cf20"),t=t(),x(),t),_e={class:"navbar-text"},pe={key:1,class:"dropdown my-2 my-lg-0"},ge={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},he={key:0},me=["src"],fe={class:"mx-3 text-success lighten-30"},ve={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},be=N(()=>c("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),we=N(()=>c("i",{class:"mdi mdi-logout"},null,-1)),ye=T(" logout "),Ae=[we,ye];function ke(t,e,o,n,r,s){const a=g("router-link");return l(),d("span",_e,[n.user.isAuthenticated?(l(),d("div",pe,[c("div",ge,[n.account.picture?(l(),d("div",he,[c("img",{src:n.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,me),c("span",fe,K(n.account.name),1)])):M("",!0)]),c("div",ve,[_(a,{to:{name:"Account"}},{default:b(()=>[be]),_:1}),c("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...u)=>n.logout&&n.logout(...u))},Ae)])])):(l(),d("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...u)=>n.login&&n.login(...u))}," Login "))])}var Ee=w(de,[["render",ke],["__scopeId","data-v-f7b5cf20"]]),xe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ee}),Te="/assets/cw-logo.71baeadb.png";const Se={setup(){return{}}},L=t=>(E("data-v-0655e9eb"),t=t(),x(),t),Ce={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},$e=L(()=>c("div",{class:"d-flex flex-column align-items-center"},[c("img",{alt:"logo",src:Te,height:"45"})],-1)),Pe=L(()=>c("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[c("span",{class:"navbar-toggler-icon"})],-1)),Oe={class:"collapse navbar-collapse",id:"navbarText"},Ne={class:"navbar-nav me-auto"},Le=T(" About ");function Ie(t,e,o,n,r,s){const a=g("router-link"),u=g("Login");return l(),d("nav",Ce,[_(a,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:b(()=>[$e]),_:1}),Pe,c("div",Oe,[c("ul",Ne,[c("li",null,[_(a,{to:{name:"About"},class:"btn text-success lighten-30 selectable text-uppercase"},{default:b(()=>[Le]),_:1})])]),_(u)])])}var Re=w(Se,[["render",Ie],["__scopeId","data-v-0655e9eb"]]),De=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Re});function qe(t){Object.entries({"./components/Login.vue":xe,"./components/Navbar.vue":De}).forEach(([o,n])=>{const r=n.name||o.substr(o.lastIndexOf("/")+1).replace(/\.\w+$/,"");t.component(r,n.default)})}const I=W(Q);qe(I);I.use(P).mount("#app");export{h as A,w as _};
